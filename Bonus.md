# Документация по системе бонусов

Модуль **Bonus** предоставляет набор готовых к использованию бонусных игровых механик, которые можно легко интегрировать в ваш проект. Сюда входят Колесо Фортуны, слот-машина, система коллекционирования предметов и временные награды. Эти инструменты помогают повысить вовлеченность и удержание игроков.

## Основные бонусные механики

### Колесо Фортуны (`WheelFortune`)
**Пространство имен:** `Neo.Bonus`
**Путь:** `Scripts/Bonus/WheelFortune/WheelFortune.cs`

Реализует механику "Колеса Фортуны". Позволяет игроку вращать колесо для получения случайного приза из предопределенного набора.

**Ключевые особенности:**
- Настраиваемая скорость вращения и замедления.
- Автоматическое или ручное расположение призов по кругу.
- Опциональное выравнивание колеса для точной остановки на секторе.

**Публичные методы:**
- `Spin()`: Начинает вращение колеса.
- `Stop()`: Инициирует остановку колеса.
- `GetPrize(int id)`: Возвращает игровой объект приза по его ID.

**Unity Events:**
- `OnWinIdVariant (int)`: Вызывается после остановки колеса. Передает ID выигравшего элемента.

### Слот-машина (`SpinController`)
**Пространство имен:** `Neo.Bonus`
**Путь:** `Scripts/Bonus/Slot/SpinController.cs`

Полнофункциональная слот-машина. Управляет ставками, линиями, вращением барабанов и определением выигрышных комбинаций.

**Ключевые особенности:**
- Гибкая настройка через `ScriptableObject` (ставки, линии, символы, множители).
- Управление ставками и количеством активных линий.
- Контроль вероятности выигрыша (`chanseWin`).

**Публичные методы:**
- `StartSpin()`: Запускает вращение барабанов.
- `AddLine()` / `RemoveLine()`: Изменяет количество активных линий.
- `AddBet()` / `RemoveBet()`: Изменяет текущую ставку.
- `SetMaxBet()`: Устанавливает максимальную ставку.

**Unity Events:**
- `OnStartSpin`: Вызывается в момент начала вращения.
- `OnEndSpin`: Вызывается после полной остановки всех барабанов и подсчета результатов.
- `OnWin (int)`: Вызывается при выигрыше. Передает общую сумму выигрыша.
- `OnWinLines (int[])`: Вызывается при выигрыше. Передает массив ID выигрышных линий.
- `OnLose`: Вызывается при проигрыше.
- `OnChangeBet (string)`: Вызывается при изменении общей ставки. Передает сумму ставки в виде строки.
- `OnChangeMoneyWin (string)`: Вызывается при выигрыше. Передает сумму выигрыша в виде строки.

### Временная награда (`TimeReward`)
**Пространство имен:** `Neo.Bonus`
**Путь:** `Scripts/Bonus/TimeReward/TimeReward.cs`

Реализует систему, в которой игрок может получить награду по истечении определенного времени.

**Ключевые особенности:**
- Настраиваемый период ожидания награды.
- Сохранение времени последней полученной награды в `PlayerPrefs`.

**Публичные методы:**
- `TakeReward()`: Попытка забрать награду. Возвращает `true` в случае успеха.
- `CanTakeReward()`: Проверяет, доступна ли награда в данный момент.
- `GetSecondsUntilReward()`: Возвращает оставшееся время до следующей награды в секундах.

**Unity Events:**
- `OnTimeUpdated (float)`: Вызывается каждую секунду. Передает оставшееся время до награды.
- `OnRewardClaimed`: Вызывается в момент успешного получения награды.
- `OnRewardAvailable`: Вызывается один раз, когда таймер доходит до нуля и награда становится доступной.

### Система коллекций (`Collection`)
**Пространство имен:** `Neo.Bonus`
**Путь:** `Scripts/Bonus/Collection/Collection.cs`

Управляет системой коллекционирования предметов. Отслеживает, какие предметы уже разблокированы, и выдает новые в качестве призов.

**Ключевые особенности:**
- Хранение данных о предметах в `ScriptableObject` (`ItemCollectionData`).
- Сохранение прогресса разблокировки в `PlayerPrefs`.

**Публичные методы:**
- `GetPrize()`: Возвращает `ItemCollectionData` нового уникального предмета и сохраняет прогресс.

**Unity Events:**
- `OnGetItem (int)`: Вызывается при получении нового предмета. Передает ID предмета.
- `OnLoadItems`: Вызывается после загрузки данных о коллекции из сохранений.

### Линейная рулетка (`LineRoulett`)
**Пространство имен:** `Neo.Bonus`
**Путь:** `Scripts/Bonus/LineRoulett.cs`

Создает визуальную рулетку в виде горизонтально движущейся ленты с призами. Игрок запускает вращение, и после остановки определяется приз, оказавшийся под стрелкой.

**Ключевые особенности:**
- Настраиваемая скорость, время вращения и замедления.
- Простое добавление призов через массив спрайтов.

**Публичные методы:**
- `StartRolling()`: Запускает вращение рулетки.

**Unity Events:**
- `OnWin (int)`: Вызывается после остановки рулетки. Передает ID выигравшего спрайта.