# Компонент Timer Object

## 1. Введение

`TimerObject` — это компонент `MonoBehaviour`, который предоставляет простой и наглядный способ создания таймеров прямо в вашей сцене Unity. В отличие от класса `Timer`, который является обычным C#-классом, `TimerObject` можно добавить на любой `GameObject` и настроить все его параметры в инспекторе.

Он идеально подходит для создания кулдаунов, обратных отсчетов, таймеров длительности эффектов или любых других временных механик, которые должны быть привязаны к конкретному объекту в сцене.

---

## 2. Описание класса

### TimerObject
- **Пространство имен**: `Neo`
- **Путь к файлу**: `Assets/Neoxider/Scripts/Tools/Time/TimerObject.cs`

**Описание**
Компонент, который управляет отсчетом времени. Он может считать как вверх, так и вниз, зацикливаться, игнорировать `Time.timeScale` и вызывать `UnityEvent` на ключевых этапах своего жизненного цикла.

**Ключевые поля**
- `duration`: Общая длительность таймера в секундах.
- `updateInterval`: Как часто (в секундах) будет обновляться таймер и вызываться события `OnTimeChanged` и `OnProgressChanged`.
- `countUp`: Если `true`, таймер будет считать от 0 до `duration`. Если `false`, будет считать от `duration` до 0.
- `useUnscaledTime`: Если `true`, таймер будет игнорировать `Time.timeScale` (полезно для UI во время паузы).
- `looping`: Если `true`, таймер будет автоматически перезапускаться после завершения.
- `autoStart`: Если `true`, таймер запустится автоматически при старте сцены.

**Публичные методы (Public Methods)**
- `Play()`: Запускает или возобновляет таймер с начала.
- `Pause(bool paused = true)`: Ставит таймер на паузу (`true`) или снимает с паузы (`false`).
- `TogglePause()`: Переключает состояние паузы.
- `Stop()`: Останавливает таймер и сбрасывает его.
- `Reset()`: Сбрасывает таймер в начальное состояние (время = 0).
- `SetTime(float time)`: Устанавливает текущее значение времени таймера.
- `GetProgress()`: Возвращает текущий прогресс таймера (от 0 до 1).
- `GetCurrentTime()`: Возвращает текущее значение времени таймера.

**Unity Events**
- `OnTimerStarted`: Вызывается в момент запуска таймера.
- `OnTimerPaused`: Вызывается при постановке таймера на паузу.
- `OnTimeChanged` (`UnityEvent<float>`): Вызывается с интервалом `updateInterval`. Передает текущее значение времени.
- `OnProgressChanged` (`UnityEvent<float>`): Вызывается с интервалом `updateInterval`. Передает текущий прогресс (от 0 до 1).
- `OnTimerCompleted`: Вызывается, когда таймер завершает отсчет.

---

## 3. Как использовать

1.  Добавьте компонент `TimerObject` на любой `GameObject` в вашей сцене.
2.  Настройте `duration`, `updateInterval`, `countUp`, `useUnscaledTime` и `looping` в инспекторе.
3.  **Для отображения времени**: Привяжите событие `OnTimeChanged` к компоненту `TimeToText` (если он есть на том же объекте или другом) или к любому другому методу, который обновляет UI.
4.  **Для запуска**: Если `autoStart` выключен, вызовите метод `Play()` из другого скрипта или привяжите его к кнопке UI.
5.  **Для реакции на завершение**: Привяжите событие `OnTimerCompleted` к методу, который должен быть вызван по окончании таймера (например, для завершения уровня или активации следующей фазы).
