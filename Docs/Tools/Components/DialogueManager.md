# Инструмент Dialogue Manager

## 1. Введение

`DialogueManager` — это комплексный инструмент для создания и управления внутриигровыми диалогами. Он использует вложенную структуру данных (`Dialogue` -> `Monolog` -> `DialogueContent`), что позволяет организовывать сложные повествовательные цепочки с разными персонажами, репликами и изображениями.

Менеджер управляет отображением текста и спрайтов, а также предоставляет множество `UnityEvent`'ов для тонкой настройки и интеграции с другими системами (например, для анимации персонажей во время разговора).

---

## 2. Описание класса

### DialogueManager
- **Пространство имен**: `Neo.Tools`
- **Путь к файлу**: `Assets/Neoxider/Scripts/Tools/Components/DialogueManager.cs`

**Описание**
Управляет логикой и отображением диалоговой системы.

**Ключевые особенности**
- **Вложенная структура**: Позволяет гибко настраивать диалоги, монологи и отдельные реплики в инспекторе.
- **Управление UI**: Автоматически обновляет `TextMeshPro` для имени персонажа и реплик, а также `Image` для спрайта говорящего.
- **Система событий**: Предоставляет `UnityEvent`'ы на каждом уровне (смена диалога, монолога, реплики, персонажа), что дает полный контроль над процессом.
- **Автоматический переход**: Может автоматически начинать следующий монолог после завершения предыдущего.

**Публичные методы**
- `StartDialogue(int index, ...)`: Начинает диалог с указанного индекса. Возвращает `void`.
- `NextSentence()`: Переходит к следующей реплике в текущем монологе. Возвращает `void`.
- `NextMonolog()`: Переходит к следующему монологу в текущем диалоге. Возвращает `void`.
- `NextDialogue()`: Переходит к следующему диалогу в массиве. Возвращает `void`.
- `RestartDialogue()`: Начинает текущий диалог заново. Возвращает `void`.

**Unity Events**
- `OnSentenceEnd`: Вызывается после отображения каждой реплики.
- `OnMonologEnd`: Вызывается, когда все реплики в монологе закончились.
- `OnDialogueEnd`: Вызывается, когда все монологи в диалоге закончились.
- `OnCharacterChange`: Вызывается при смене говорящего персонажа. Передает `string` (имя нового персонажа).
