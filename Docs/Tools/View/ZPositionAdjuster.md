# Компонент Z Position Adjuster

## 1. Введение

`ZPositionAdjuster` — это компонент, который автоматически регулирует Z-позицию объекта в зависимости от его Y-позиции. Это распространенная техника в 2D-играх (или 2.5D), чтобы создать иллюзию глубины: объекты, расположенные выше на экране, кажутся "дальше" или "за" объектами, расположенными ниже.

Это позволяет легко управлять порядком отрисовки спрайтов без необходимости вручную изменять их Z-координату или порядок сортировки.

---

## 2. Описание класса

### ZPositionAdjuster
- **Пространство имен**: `Neo.Tools`
- **Путь к файлу**: `Assets/Neoxider/Scripts/Tools/View/ZPositionAdjuster.cs`

**Описание**
Компонент, который в каждом `LateUpdate` берет текущую Y-координату своего `Transform`, преобразует ее в новое значение Z и применяет к `transform.position.z`. Это позволяет объектам автоматически "перекрывать" друг друга в зависимости от их вертикального положения.

**Ключевые поля**
- `_useNormalizeToUnit` (`bool`): Определяет, как будет нормализована Y-позиция.
  - Если `true`: Y-позиция будет нормализована к диапазону от 0 до 1 (используя метод расширения `NormalizeToUnit()`).
  - Если `false`: Y-позиция будет нормализована к другому диапазону (используя `NormalizeToRange()`).
- `_ratio` (`float`): Множитель, который применяется к нормализованной Y-позиции для получения финальной Z-позиции. Позволяет контролировать "глубину" эффекта.

**Как это работает**
- Чем выше объект по оси Y, тем больше (или меньше, в зависимости от `_ratio`) будет его Z-координата.
- Компонент работает в `LateUpdate`, чтобы гарантировать, что Z-позиция будет обновлена после всех других движений объекта.
- Изменения видны прямо в редакторе благодаря `OnValidate`.

---

## 3. Зависимости

- Компонент использует методы расширения `NormalizeToUnit()` и `NormalizeToRange()` из пространства имен `Neo.Extensions`. Убедитесь, что эти расширения доступны в проекте.

---

## 4. Пример использования

1.  Добавьте компонент `ZPositionAdjuster` на вашего 2D-персонажа или любой другой объект, который должен иметь эффект глубины.
2.  Настройте `_ratio` для желаемого эффекта. Положительное `_ratio` сделает объекты, расположенные выше, "дальше" (меньше Z), а отрицательное — "ближе" (больше Z).
3.  Убедитесь, что ваши спрайты используют один и тот же `Sorting Layer` и `Order in Layer` (или настройте их так, чтобы они не конфликтовали с Z-позицией).

Теперь, когда ваш персонаж будет двигаться вверх или вниз по экрану, его Z-позиция будет автоматически меняться, создавая эффект глубины.
